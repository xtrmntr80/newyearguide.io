<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMO5熊本 年末年始ご近所ガイド 2025-2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">

    <!-- Chosen Palette: Modern New Year (Deep Red & Warm White) -->
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #fafaf9; color: #1c1917; }
        .chart-container { position: relative; width: 100%; height: 260px; margin: auto; }
        .date-active { background-color: #991b1b !important; color: white !important; transform: scale(1.05); }
        .filter-active { background-color: #b45309 !important; color: white !important; }
        .safe-area-pb { padding-bottom: env(safe-area-inset-bottom); }
    </style>

    <!-- Application Structure Plan:
         - Mobile-First Interface: Bottom navigation style date selectors for easy thumb access.
         - CSV Data Mapping: Maps all 21+ entries from the CSV including hours and LO info.
         - Visual Analytics: Donut chart showing town's activity level.
         - Quick Search: Floating category filters.
         - CONFIRMATION: NO SVG used. NO Mermaid JS used. Single HTML file.
    -->
</head>
<body class="antialiased min-h-screen">

    <!-- Header Section -->
    <header class="bg-[#1c1917] text-white pt-8 pb-12 px-6 rounded-b-[2rem] shadow-2xl relative">
        <div class="max-w-md mx-auto relative z-10">
            <div class="inline-block px-3 py-1 bg-amber-600 text-[10px] font-bold rounded-full mb-3">OMO5 KUMAMOTO OFFICIAL</div>
            <h1 class="text-3xl font-black mb-2">年末年始<br><span class="text-amber-500">ご近所ガイド</span></h1>
            <p class="text-xs text-stone-400">2025-2026年度版：CSV全21件掲載中</p>
        </div>
        <div class="absolute right-[-20px] bottom-[-20px] w-40 h-40 bg-amber-600/10 rounded-full blur-3xl"></div>
    </header>

    <!-- Main Content -->
    <main class="max-w-md mx-auto px-4 -mt-6">
        
        <!-- Date Buttons (Scrollable on Mobile) -->
        <div class="flex overflow-x-auto gap-2 pb-4 no-scrollbar" id="date-scroll">
            <button onclick="updateView('12/30')" class="date-btn flex-shrink-0 w-20 bg-white border border-stone-200 rounded-2xl p-3 text-center shadow-md transition-all" data-date="12/30">
                <span class="block text-[10px] text-stone-400">12/30</span><span class="block font-bold">火</span>
            </button>
            <button onclick="updateView('12/31')" class="date-btn flex-shrink-0 w-20 bg-white border border-stone-200 rounded-2xl p-3 text-center shadow-md transition-all" data-date="12/31">
                <span class="block text-[10px] text-stone-400">12/31</span><span class="block font-bold">大晦日</span>
            </button>
            <button onclick="updateView('1/1')" class="date-btn flex-shrink-0 w-20 bg-white border border-stone-200 rounded-2xl p-3 text-center shadow-md transition-all" data-date="1/1">
                <span class="block text-[10px] text-red-500">1/1</span><span class="block font-bold text-red-600">元旦</span>
            </button>
            <button onclick="updateView('1/2')" class="date-btn flex-shrink-0 w-20 bg-white border border-stone-200 rounded-2xl p-3 text-center shadow-md transition-all" data-date="1/2">
                <span class="block text-[10px] text-stone-400">1/2</span><span class="block font-bold">初売り</span>
            </button>
            <button onclick="updateView('1/3')" class="date-btn flex-shrink-0 w-20 bg-white border border-stone-200 rounded-2xl p-3 text-center shadow-md transition-all" data-date="1/3">
                <span class="block text-[10px] text-stone-400">1/3</span><span class="block font-bold">金</span>
            </button>
            <button onclick="updateView('1/4')" class="date-btn flex-shrink-0 w-20 bg-white border border-stone-200 rounded-2xl p-3 text-center shadow-md transition-all" data-date="1/4">
                <span class="block text-[10px] text-stone-400">1/4</span><span class="block font-bold">日</span>
            </button>
        </div>

        <!-- Activity Summary -->
        <div class="bg-white rounded-3xl p-6 shadow-sm border border-stone-100 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="font-bold text-lg"><span id="target-date-label">--</span>の営業率</h2>
                <div class="text-right">
                    <span id="open-count" class="text-2xl font-black text-green-600">0</span>
                    <span class="text-xs text-stone-400">/24店舗</span>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="ratioChart"></canvas>
            </div>
        </div>

        <!-- Category Filters -->
        <div class="flex overflow-x-auto gap-2 mb-6 no-scrollbar">
            <button onclick="setFilter('all')" class="filter-btn flex-shrink-0 px-4 py-2 bg-stone-100 rounded-full text-xs font-bold filter-active" data-cat="all">すべて</button>
            <button onclick="setFilter('fac')" class="filter-btn flex-shrink-0 px-4 py-2 bg-stone-100 rounded-full text-xs font-bold" data-cat="fac">大型施設</button>
            <button onclick="setFilter('food')" class="filter-btn flex-shrink-0 px-4 py-2 bg-stone-100 rounded-full text-xs font-bold" data-cat="food">飲食店</button>
            <button onclick="setFilter('ramen')" class="filter-btn flex-shrink-0 px-4 py-2 bg-stone-100 rounded-full text-xs font-bold" data-cat="ramen">ラーメン</button>
        </div>

        <!-- Shop List -->
        <div id="shop-list" class="space-y-3 safe-area-pb">
            <!-- Dynamic Cards -->
        </div>

    </main>

    <footer class="mt-12 py-10 text-center px-8 border-t border-stone-200">
        <p class="text-xs font-bold mb-2">OMO5熊本 by 星野リゾート</p>
        <p class="text-[10px] text-stone-400 leading-relaxed">掲載データは2025年12月現在のCSV情報に基づきます。詳細は各店舗へお問い合わせください。</p>
    </footer>

    <script>
        const shopData = [
            { name: "鶴屋百貨店", cat: "fac", sc: {"12/30":"通常", "12/31":"通常", "1/1":"休み", "1/2":"初売り•通常", "1/3":"通常", "1/4":"通常"}, n: "熊本の老舗。1/2は初売り。" },
            { name: "COCOSA（B1食品）", cat: "fac", sc: {"12/30":"通常", "12/31":"10:00-22:00", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "中心部のスーパー機能。" },
            { name: "サクラマチ(飲食B1/3F)", cat: "fac", sc: {"12/30":"通常", "12/31":"9:30-20:00", "1/1":"9:30-20:00", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "19:30LO。元旦営業の要。" },
            { name: "サクラマチ(全館)", cat: "fac", sc: {"12/30":"通常", "12/31":"9:30-19:00", "1/1":"9:30-19:00", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "" },
            { name: "阿部牧場(HAB@1F)", cat: "food", sc: {"12/30":"通常", "12/31":"通常", "1/1":"休み", "1/2":"休み", "1/3":"休み", "1/4":"休み"}, n: "ソフトクリーム等。" },
            { name: "ジュピター(HAB@1F)", cat: "fac", sc: {"12/30":"通常", "12/31":"通常", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "輸入食品。" },
            { name: "Flour&water(HAB@1F)", cat: "food", sc: {"12/30":"通常", "12/31":"休み", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "ベーカリー。" },
            { name: "博多 魚蔵(HAB@2F)", cat: "food", sc: {"12/30":"通常", "12/31":"通常", "1/1":"通常", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "元旦も通常営業！" },
            { name: "鼎泰豊(HAB@2F)", cat: "food", sc: {"12/30":"通常", "12/31":"通常", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "小籠包の人気店。" },
            { name: "とんかつ 濵かつ", cat: "food", sc: {"12/30":"通常", "12/31":"通常", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "HAB@熊本 2F。" },
            { name: "I'm COFFEE Stand", cat: "food", sc: {"12/30":"通常", "12/31":"通常", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "HAB@熊本 2F。" },
            { name: "醸音 (HAB@2F)", cat: "food", sc: {"12/30":"通常", "12/31":"通常", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "九州の肴とワイン。" },
            { name: "焼肉すどう", cat: "food", sc: {"12/30":"通常", "12/31":"休み", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "1/2-4は21:00LO。" },
            { name: "赤組 (ラーメン)", cat: "ramen", sc: {"12/30":"11:00-23:30", "12/31":"休", "1/1":"休", "1/2":"11:00-23:30", "1/3":"11:00-23:30", "1/4":"11:00-23:30"}, n: "上通のコスパ最強店。" },
            { name: "テラス", cat: "food", sc: {"12/30":"17:30-24:00", "12/31":"17:00-24:00", "1/1":"休み", "1/2":"17:00-23:00", "1/3":"17:00-23:00", "1/4":"17:00-23:00"}, n: "大晦日も営業。" },
            { name: "旬家はちどり", cat: "food", sc: {"12/30":"17:00-24:00", "12/31":"休み", "1/1":"休み", "1/2":"休み", "1/3":"休み", "1/4":"休み"}, n: "5日より営業。" },
            { name: "惣や", cat: "food", sc: {"12/30":"通常", "12/31":"休み", "1/1":"休み", "1/2":"17:00-23:00", "1/3":"17:00-23:00", "1/4":"通常"}, n: "居酒屋。" },
            { name: "菅乃屋 (上通)", cat: "food", sc: {"12/30":"通常", "12/31":"11:00-16:00", "1/1":"休み", "1/2":"休み", "1/3":"通常", "1/4":"通常"}, n: "馬肉料理。15:30LO。" },
            { name: "菅乃屋 (銀座通り)", cat: "food", sc: {"12/30":"通常", "12/31":"11:00-16:00", "1/1":"休み", "1/2":"通常", "1/3":"通常", "1/4":"通常"}, n: "15:30LO。" },
            { name: "勝烈亭", cat: "food", sc: {"12/30":"通常", "12/31":"休み", "1/1":"休み", "1/2":"11:30-21:30", "1/3":"11:30-21:30", "1/4":"通常"}, n: "とんかつ。" },
            { name: "桂花 (本店)", cat: "ramen", sc: {"12/30":"通常", "12/31":"11:00-16:00", "1/1":"休み", "1/2":"休み", "1/3":"11:00-16:00", "1/4":"通常"}, n: "15:30LO。" },
            { name: "桂花 (鶴屋店)", cat: "ramen", sc: {"12/30":"通常", "12/31":"通常", "1/1":"休み", "1/2":"10:00-19:00", "1/3":"通常", "1/4":"通常"}, n: "" },
            { name: "紅蘭亭 (下通)", cat: "food", sc: {"12/30":"通常", "12/31":"11:00-15:00", "1/1":"休み", "1/2":"11:00-20:00", "1/3":"通常", "1/4":"通常"}, n: "太平燕。" },
            { name: "紅蘭亭 (パビリオン)", cat: "food", sc: {"12/30":"通常", "12/31":"11:00-15:00", "1/1":"休み", "1/2":"休み", "1/3":"通常", "1/4":"通常"}, n: "" }
        ];

        let curDate = "1/1";
        let curCat = "all";
        let myChart = null;

        function updateView(date) {
            curDate = date;
            document.querySelectorAll('.date-btn').forEach(b => b.classList.toggle('date-active', b.dataset.date === date));
            document.getElementById('target-date-label').innerText = date.replace('12/', '12月').replace('1/', '1月');
            render();
        }

        function setFilter(cat) {
            curCat = cat;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.toggle('filter-active', b.dataset.cat === cat));
            render();
        }

        function render() {
            const list = document.getElementById('shop-list');
            list.innerHTML = '';
            const filtered = shopData.filter(d => curCat === 'all' || d.cat === curCat);
            let open = 0;
            
            filtered.forEach(d => {
                const s = d.sc[curDate];
                const isClosed = s.includes('休');
                if(!isClosed) open++;
                const card = document.createElement('div');
                card.className = `bg-white p-4 rounded-2xl shadow-sm border border-stone-100 flex justify-between items-center ${isClosed ? 'opacity-40 grayscale' : ''}`;
                card.innerHTML = `
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <span class="w-1.5 h-1.5 rounded-full ${isClosed ? 'bg-stone-300' : 'bg-green-500'}"></span>
                            <h3 class="font-bold text-sm">${d.name}</h3>
                        </div>
                        <p class="text-[10px] text-stone-400">${d.n || '年始特別営業'}</p>
                    </div>
                    <div class="text-right">
                        <p class="font-black text-xs ${isClosed ? 'text-stone-300' : 'text-stone-800'}">${s}</p>
                        <p class="text-[8px] text-stone-300 uppercase">Hours</p>
                    </div>
                `;
                list.appendChild(card);
            });
            document.getElementById('open-count').innerText = open;
            updateChart(open, filtered.length - open);
        }

        function updateChart(o, c) {
            const ctx = document.getElementById('ratioChart').getContext('2d');
            if (myChart) myChart.destroy();
            myChart = new Chart(ctx, {
                type: 'doughnut',
                data: { datasets: [{ data: [o, c], backgroundColor: ['#10b981', '#e5e7eb'], borderWidth: 0 }] },
                options: { cutout: '80%', plugins: { tooltip: { enabled: false } } }
            });
        }

        window.onload = () => updateView("1/1");
    </script>
</body>
</html>